
<!DOCTYPE html>
<html class="no-js">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<title>精准健康管家</title>
<meta name="renderer" content="webkit">
<meta http-equiv="Cache-Control" content="no-siteapp" />
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="Amaze UI" />
<meta name="msapplication-TileColor" content="#0e90d2">
<script src="../js/jquery.js"></script>
<link rel="stylesheet" href="../css/amazeui.min.css">

<style>
html {
	font-size: 10px;
}

html, body {
	background-color: #f0eff4;
}

body {
	padding-bottom: 0;
	margin: 0;
}

* {
	padding: 0;
	margin: 0;
}

header {
	position: fixed;
	top: 0;
	left: 0;
	z-index: 999;
	width: 100%;
	height: 49px;
	background-color: #67C7BE;
	color: #fff;
}

header .back {
	position: absolute;
	top: 0;
	left: 0;
	display: inline-block;
	padding-left: 5px;
	font-size: 30px;
}

header p {
	margin: 0;
	line-height: 49px;
	font-size: 16px;
	text-align: center;
}

.register {
	padding: 8px 0px;
	font-size: 14px;
	margin-top: -46px;
}

.res-item {
	position: relative;
	width: 100%;
	border-radius: 4px;
	margin-bottom: 8px;
	background-color: #fff;
}

.res-icon {
	position: absolute;
	left: 8px;
	top: 5px;
	z-index: 100;
	display: inline-block;
	font-size: 18px;
	color: #9c9c9c;
}

.res-item .input-item {
	display: inline-block;
	width: 100%;
	padding-left: 31px;
	height: 40px;
	border: none;
	font-size: inherit;
}

.res-item .input-item:focus {
	outline-offset: 0;
	outline: -webkit-focus-ring-color auto -2px;
	background-color: #fefffe;
	border: 1px solid #67C7BE;
	outline: 0;
	-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 5px
		rgba(226, 25, 69, .3);
	box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 5px
		rgba(226, 25, 69, 0.3);
}

.res-item .input-item:focus+.res-icon {
	color: #67C7BE;
}

.yanzhengma {
	position: absolute;
	right: -10px;
	top: 12px;
	z-index: 100;
	display: inline-block;
	padding: 0.5rem 0.8rem;
	font-size: 14px;
	border: none;
	background-color: transparent;
	color: #67C7BE;
	border-radius: 8px;
}

.yanzhengma:disabled {
	color: #999999;
}

.res-btn {
	margin-top: 10px;
	padding: 0 0px;
}

.res-btn button {
	background-color: #67C7BE;
	font-size: 14px;
	color: #fff;
	border-radius: 8px;
}

.res-btn button:focus {
	color: #fff;
}

fieldset {
	-webkit-appearance: none;
	width: 100%;
	border: 1px soild #333;
	margin: 0;
	font-family: inherit;
	font-size: 100%;
	-moz-box-sizing: border-box;
	box-size: border-box;
	text-decoration: none;
}

.ui-input-text {
	border-style: unset;
	min-width: 60%;
	-webkit-box-shadow: none;
}

.ui-focus {
	-moz-box-shadow: none !important;
	-webkit-box-shadow: none !important;
	box-shadow: none !important;
}

.sampling_location_info {
	border-radius: 20px;
	margin-bottom: 80px;
}

.local_info {
	margin: 2px 5px;
	min-height: 30px;
	align-items: center;
	flex-wrap: wrap;
	max-width: 100%;
	word-break: break-all;
	background-color: #F5F5F5;
	display: flex;
	padding: 5px;
	border-radius: 10px;
}

.somthing {
	/* position: relative;
    margin: 0px auto 80px;
    z-index: 100;
    display: block;
    padding: 0.2rem 0.8rem;
    border-radius: 9px;
    background-color: #fff; */
	margin: 0px auto 80px;
}

.record {
	position: relative;
	margin: 0px auto;
	z-index: 100;
	display: block;
	padding: 0.2rem 0.8rem;
	border-radius: 10px;
	background-color: #FFFFFF;
	width: 90%;
	height: 215px;
}

.line {
	width: 90%;
	margin: auto;
	border-bottom: solid 1px #e8e8e8;
}

.ui-icon-adds {
	background: url(images/add_small.png) 15% 50% no-repeat;
	background-size: 16px;
}

.ui-btn-icon-left:after {
	background-color: transparent;
}

.somthing .item_name {
	border: 0px;
	border-radius: 10px;
	width: 90%;
	margin: 10px 0px;
}

div {
	text-shadow: #fff 0px 0px 0px;
}

input {
	text-shadow: #fff 0px 0px 0px;
	border: 0;
}

.group {
	font-size: 16px;
	line-height: 50px;
	display: flex;
	align-items: center;
	width: 90%;
	margin: 0 auto;
	position: relative;
}

.no_symbol {
	outline: none;
}

.popupStyle {
	display: none;
	width: 160px;
	background-color: rgb(85, 85, 85);
	color: #fff;
	text-align: center;
	border-radius: 6px;
	padding: 8px 8px;
	position: fixed;
	text-align: center;
	z-index: 999;
	top: 40%;
	left: 50%;
	margin-left: -80px;
}

.popupStyle::after {
	position: absolute;
	top: 50%;
	left: 50%;
	margin-left: -5px;
	border-width: 5px;
	border-style: solid;
	border-color: #555 transparent transparent transparent;
}

.piaochecked {
	float: left;
	cursor: pointer;
	text-align: center;
	background-image: url(images/icon_radio_selected@3x.png);
	background-size: 16px;
	background-repeat: no-repeat;
	background-position: 0 5px;
}

.on_check {
	background-image: url(images/icon_radio_default@3x.png);
}

.radioclass {
	opacity: 0;
	cursor: pointer;
	-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
	filter: alpha(opacity = 0);
}
</style>
</head>
<body>
	<img src="images/banner@3x.png" style="width:100%;height:auto;">
	<div class="register">
		<div class="record">
			<legend
				style="text-align: center;height: 25px;font-size: 18px;font-family: PingFangSC-Medium, PingFang SC;
				font-weight: 500;color: #333333;line-height: 25px;margin: 30px auto 20px;border-bottom: 0;">欢迎登录</legend>
			<div class="group">
				<div style="width: 25%;">手机号</div>
				<div style="width: 70%;">
					<input type="tel"
						style="background: #fff; text-shadow: #fff 0px 0px 0px; padding: 0px; width: 65%;"
						name="phone" id="phone" class="no_symbol" placeholder="请输入手机号码" />
				</div>
				<button type="button" class="yanzhengma">获取验证码</button>
			</div>
			<div class="line"></div>
			<div class="group">
				<div style="width: 25%;">验证码</div>
				<div style="width: 70%;">
					<input type="tel"
						style="background: #fff; text-shadow: #fff 0px 0px 0px; padding: 0px; width: 65%;"
						name="ybbm" id="ybbm" class="no_symbol" placeholder="请输入验证码"
						maxlength="4" />
				</div>
			</div>
			<div class="line"></div>
		</div>
	</div>

	<div class="weui-cells_checkbox">
		<label class="weui-check__label" for="xly" style="margin-left: 20px;font-weight: unset;">
			<div class="piaochecked on_check" style="padding-left: 18px;" >
				<input type="checkbox" class="weui-check radioclass input"
					name="checkbottom1" id="xly" style="width:0;"> <i style="width: 10%;"
					class="weui-icon-checked" style="text-align:center"></i>
				<div
					style="float: right;text-align:left;font-size: 11px;color: #999999;display: contents;">
					我已阅读并同意
				</div>
			</div>
			<a href="./read.html" style="font-size: 11px;color:#75CEC8">《知情同意书》</a>
		</label>
	</div>

	<div class="res-btn">
		<button type="button" id="res-btn" class="am-btn am-btn-block"
			style="width: 90%;height: 44px;background: #75CEC8;border-radius: 6px;margin: 0px auto 20px;font-size: 17px;color: #ffffff;">登录</button>
	</div>
	<p
		style="text-align:center;margin: auto;font-size: 12px;font-weight: 400;line-height: 17px;color:#999999; ">登录后方便您随时查看基因检测进度和报告</p>
	<script>

	
		var times = 60;
		function roof() {
			if (times == 0) {
				$('.yanzhengma').text('0' + times + 's重新获取');
				$('.yanzhengma').prop('disabled', false);
				$('.yanzhengma').text('重新获取');
				times = 60;
				return
			}
			//$('.yanzhengma').text('发送验证码(' + times + 's)');
			if (times < 10) {
				$('.yanzhengma').text('0' + times + 's重新获取');
			} else {
				$('.yanzhengma').text(times + 's重新获取');
			}
			times--;
			setTimeout(roof, 1000);
		}
		$('.yanzhengma').on('click', function() {
			var mobile = $('#phone').val();
			if (mobile == "") {
				var msg = "请填写手机号";
				handleDomMsg(msg);
				return;
			}
	
			//先将样本编码变成验证码
			//$("#ybbm").attr('placeholder','验证码');
			//验证手机号
			var flag = checkPhone();
			if (flag) {
				$(this).prop('disabled', true);
				roof();
				var phoneformsg = document.getElementById('phone').value;
				phoneformsg = phoneformsg.split(" ")[0] + phoneformsg.split(" ")[1] + phoneformsg.split(" ")[2];
				//发送验证码
				$.ajax({
					url : "../indexlogin/Verification.hn?phone=" + phoneformsg,
					type : 'get',
					dataType : "json",
					success : function(data) {}
				});
			} else {
				handleDomMsg("手机号格式不正确");
			}
		});
	
		function checkPhone() {
			var phone = $('#phone').val();
			phone = phone.split(" ")[0] + phone.split(" ")[1] + phone.split(" ")[2];
			console.log(phone);
			if (!(/(^1[123456789]\d{9}$)/.test(phone))) {
				return false;
			}
			return true;
		}
	
		$('#res-btn').on('click', function() {
			var mobile = $('#phone').val();
			console.log(mobile)
			if (mobile == "") {
				var msg = "请填写手机号";
				handleDomMsg(msg);
				return;
			}
			mobile = mobile.split(" ")[0] + mobile.split(" ")[1] + mobile.split(" ")[2];
			console.log("+" + mobile + "+");
			var verCode = $('#ybbm').val();
	
	
			var flag = checkPhone();
			if (!flag) {
				var msg = "手机号格式不正确";
				handleDomMsg(msg);
				return;
			}
	
			if (verCode == "") {
				var msg = "请填写验证码";
				handleDomMsg(msg);
				return;
			}
			//$(this).prop('disabled',true);
			//var text = $("#ybbm").attr('placeholder');
			var bottomchck1 = $("input[name='checkbottom1']:checked").val();
	        if(typeof bottomchck1 == "undefined"){
	        	alert("请阅读并勾选《知情同意书》！");
	            return;
	        }
			
			$.ajax({
				url : "../indexlogin/login.hn",
				type : 'post',
				data : {
					phone : mobile,
					verCode : verCode,
				},
				dataType : "json",
				success : function(data) {
					if (data.success) {
						  	window.location.href="./report_list.html"
							//location.replace("./report_list.html);

					} else {
						handleDomMsg(data.msg);
						return;
					}
				}
			});
		})

		$('#phone').change(function() {
			var value = $(this).val().replace(/\D/g, '').substring(0, 11);
			var valueLen = value.length;
			if (valueLen > 3 && valueLen < 8) {
				value = value.replace(/^(...)/g, "$1 ");
			} else if (valueLen >= 8) {
				value = value.replace(/^(...)(....)/g, "$1 $2 ");
			}
	
			//var value = $(this).val().replace(/\s/g,'').replace(/(\w{4})(?=\w)/g,"$1 ");
			$(this).val(value);
		});
	
		$('#phone').keyup(function() {
			var value = $(this).val().replace(/\D/g, '').substring(0, 11);
			var valueLen = value.length;
			if (valueLen > 3 && valueLen < 8) {
				value = value.replace(/^(...)/g, "$1 ");
			} else if (valueLen >= 8) {
				value = value.replace(/^(...)(....)/g, "$1 $2 ");
			}
	
			//var value = $(this).val().replace(/\s/g,'').replace(/(\w{4})(?=\w)/g,"$1 ");
			$(this).val(value);
		});
	
		// DOM 弹窗
		function handleDomMsg(message) {
			const div = document.createElement("div");
			document.body.appendChild(div);
			div.innerHTML = message || "this is a Message";
			div.className = "popupStyle";
			div.style.display = "block";
			setTimeout(() => {
				div.remove();
			}, 2000);
		}
	
		$(".piaochecked").off("click").on("click", function() {
			$(this).hasClass("on_check") ? $("#xly").prop('checked','true') : $("#xly").removeAttr("checked");
			$(this).hasClass("on_check") ? $(this).removeClass("on_check") : $(this).addClass("on_check");
			return false;
		})
		
		//alert 弹窗不显示域名
		var wAlert = window.alert;
		window.alert = function (message) {
			try {
				var iframe = document.createElement("IFRAME");
				iframe.style.display = "none";
				iframe.setAttribute("src", 'data:text/plain,');
				document.documentElement.appendChild(iframe);
				var alertFrame = window.frames[0];
				var iwindow = alertFrame.window;
				if (iwindow == undefined) {
					iwindow = alertFrame.contentWindow;
				}
				iwindow.alert(message);
				iframe.parentNode.removeChild(iframe);
			}
			catch (exc) {
				return wAlert(message);
			}
		}
		var wConfirm = window.confirm;
		window.confirm = function (message) {
			try {
				var iframe = document.createElement("IFRAME");
				iframe.style.display = "none";
				iframe.setAttribute("src", 'data:text/plain,');
				document.documentElement.appendChild(iframe);
				var alertFrame = window.frames[0];
				var iwindow = alertFrame.window;
				if (iwindow == undefined) {
					iwindow = alertFrame.contentWindow;
				}
				iwindow.confirm(message);
				iframe.parentNode.removeChild(iframe);
			}
			catch (exc) {
				return wConfirm(message);
			}
		}
	</script>
</body>
</html>
