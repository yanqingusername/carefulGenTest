<!DOCTYPE html>
<html class="no-js">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<title>物流详情</title>
<meta name="renderer" content="webkit">
<meta http-equiv="Cache-Control" content="no-siteapp" />
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="Amaze UI" />
<meta name="msapplication-TileColor" content="#0e90d2">
<script src="../js/jquery.js"></script>
<link rel="stylesheet" href="../css/amazeui.min.css">
<!-- <link rel="stylesheet" type="text/css" href="css/public.css" /> -->

<!-- 引入样式和js文件 -->
<link rel="stylesheet" type="text/css" href="css/mobileSelect.css" />
<script src="js/mobileSelect.js" type="text/javascript"></script>
<style>
html {
	font-size: 10px;
}

html, body {
	background-color: #f0eff4;
}

body {
	padding-bottom: 0;
	margin: 0;
}

* {
	padding: 0;
	margin: 0;
}

.register {
	padding: 8px 6px;
	font-size: 14px;
	margin-top: 32px;
}

.res-item {
	position: relative;
	width: 100%;
	border-radius: 4px;
	margin-bottom: 8px;
	background-color: #fff;
}

.res-icon {
	position: absolute;
	left: 8px;
	top: 5px;
	z-index: 100;
	display: inline-block;
	font-size: 18px;
	color: #9c9c9c;
}

.res-item .input-item {
	display: inline-block;
	width: 100%;
	padding-left: 31px;
	height: 40px;
	border: none;
	font-size: inherit;
}

.res-item .input-item:focus {
	outline-offset: 0;
	outline: -webkit-focus-ring-color auto -2px;
	background-color: #fefffe;
	border: 1px solid #67C7BE;
	outline: 0;
	-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 5px
		rgba(226, 25, 69, .3);
	box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 5px
		rgba(226, 25, 69, 0.3);
}

.res-item .input-item:focus+.res-icon {
	color: #67C7BE;
}

.res-btn {
	margin-top: 10px;
	padding: 0 5px;
}

.res-btn button {
	background-color: #67C7BE;
	font-size: 14px;
	color: #fff;
	border-radius: 8px;
}

.res-btn button:focus {
	color: #fff;
}

fieldset {
	-webkit-appearance: none;
	width: 100%;
	border: 1px soild #333;
	margin: 0;
	font-family: inherit;
	font-size: 100%;
	-moz-box-sizing: border-box;
	box-size: border-box;
	text-decoration: none;
}

.ui-input-text {
	border-style: unset;
	min-width: 60%;
	-webkit-box-shadow: none;
}

.ui-focus {
	-moz-box-shadow: none !important;
	-webkit-box-shadow: none !important;
	box-shadow: none !important;
}

.sampling_location_info {
	border-radius: 20px;
	margin-bottom: 80px;
}

.local_info {
	margin: 2px 5px;
	min-height: 30px;
	align-items: center;
	flex-wrap: wrap;
	max-width: 100%;
	word-break: break-all;
	background-color: #F5F5F5;
	display: flex;
	padding: 5px;
	border-radius: 10px;
}

.record {
	position: relative;
	margin: 0px 18px;
	z-index: 100;
	display: block;
	padding: 0.2rem 0.8rem;
	border-radius: 10px;
	background: #FFFFFF;
	text-align: center;
}

.line {
	width: 90%;
	margin: auto;
	border-bottom: solid 1px #e8e8e8;
}

.ui-icon-adds {
	background: url(images/add_small.png) 15% 50% no-repeat;
	background-size: 16px;
}

.ui-btn-icon-left:after {
	background-color: transparent;
}

div {
	text-shadow: #fff 0px 0px 0px;
}

input {
	text-shadow: #fff 0px 0px 0px;
	border: 0;
}

.group {
	font-size: 16px;
	line-height: 42px;
	display: flex;
	align-items: center;
	width: 90%;
	margin: 0;
	position: relative;
}

.process-status-new {
	width: 100%;
	height: 46px;
	padding-top: 24px;
}

.process-status-new ul {
	margin: 0 36px;
	border-top: 1px solid #DDDDDD;
	height: 45px;
	position: relative;
	list-style: none;
}

.process-status-new ul li {
	position: absolute;
	float: left;
	width: 50%;
	top: -12px;
}

.process-status-new ul .p-gjj {
	left: 0;
}

.process-status-new ul .p-basic {
	left: 50.0%;
}

.process-status-new ul .p-edu {
	left: 99.9%;
}

.process-status-new ul li .box {
	width: 88px;
	position: relative;
	margin-left: -44px;
	z-index: 2;
}

.process-status-new ul li .box .icon {
	width: 21px;
	height: 21px;
	padding: 1px;
	margin: 0 auto;
}

.process-status-new ul li span.l {
	position: absolute;
	left: 0;
	top: 11px;
	width: 100%;
	z-index: 1;
	display: none;
	height: 1px;
	background-color: #75CEC8;
}

.steptext {
	text-align: center;
	font-size: 13px;
	font-weight: 500;
	color: #333333;
	line-height: 18px;
}

.circle {
	background-color: #75CEC8;
	border: 0px solid #75CEC8;
	width: 26px;
	height: 26px;
	display: block;
	border-radius: 100%;
	text-align: center;
	color: #fff;
}

#res-btn {
	background: #75CEC8;
}

#res-btn:disabled {
	background: #CCCCCC;
}

.node {
	position: absolute;
	border-radius: 100%;
	border: 5px solid #75CEC8;
	top: -5px;
	left: -5px;
}

* {
	margin: 0;
	padding: 0;
}

ul {
	width: 100%;
	margin: 14px auto;
	padding: 0px 10px;
}

li {
	position: relative;
	padding: 0 12px;
	list-style: none;
	min-height: 60px;
	border-left: 0.5px solid #DDDDDD;
}

li:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -3px;
	width: 6px;
	height: 6px;
	text-align: center;
	background: #DDDDDD;
	border-radius: 50%;
}

.last_progress {
	border: none;
}


.first_progress {
}

.first_progress::before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -3px;
	width: 6px;
	height: 6px;
	text-align: center;
	background: #75CEC8;
	border-radius: 50%;
}

.progress_content {
    position: relative;
    top: -7px;
}

.progress_title {
	font-size: 13px;
	color: #666666;
	font-weight: 400;
	margin-bottom: 6px;
	text-align: left;
}

.progress_time {
	color: #999999;
	font-size: 12px;
	margin: 0px;
	padding-bottom: 20px;
	text-align: left;
}

.active {
	color: #75CEC8;
}

.no_symbol{
	outline:none;
}
</style>
</head>

<!-- 个人中心 -->
<div class="container-area">
	<div id="menu"></div>

	<div class="container-area-right">
		<div class="P1" id="content">
			<div class="P2">
				<div id="stepBar" class="ui-stepBar-wrap"></div>
			</div>
			<div class="record" style="margin: 19px 18px 20px; height: 89px;">
				<div class="group">
					<div style="width:30%; color: #999999;">物流公司</div>
					<div style="width: 70%;">
						<input type="text"
							style="background: #FFFFFF; text-shadow: #fff 0px 0px 0px; padding: 0px; width: 80%; float: left;"
							name="track_company" id="track_company" class="no_symbol" readonly/>
					</div>
				</div>
				<div class="group">
					<div style="width:30%; color: #999999;">物流单号</div>
					<div style="width: 70%;">
						<input type="text"
							style="background: #FFFFFF; text-shadow: #fff 0px 0px 0px; padding: 0px; width: 80%; float: left;"
							name="order_serial" id="order_serial" class="no_symbol" readonly/>
					</div>
				</div>
			</div>
			<div class="record" style="padding-top: 22px;">
				<ul class="progress_box"></ul>
			</div>
		</div>
	</div>
</div>
<body>
	<script type="text/javascript" src="../js/jquery.js"></script>
	<script type="text/javascript" src="../js/common.js"></script>
	<script>
		//var url = "http://syrdev.coyotebio-lab.com/zhongkangMallmanage/tb/order/getSFTrackingSingleInfo_Phone.hn?"
		//var url = "https://store.coyotebio-lab.com/zhongkangMallmanage/tb/order/getSFTrackingSingleInfo_Phone.hn?"
	
		function GetRequest() {
			var url = location.search; //获取url中"?"符后的字串
			var theRequest = new Object();
			if (url.indexOf("?") != -1) {
				var str = url.substr(1);
				strs = str.split("&");
				for (var i = 0; i < strs.length; i++) {
					theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
				}
			}
			return theRequest;
		}
	
		var Request = new Object();
		Request = GetRequest();
		var phone = Request["phone"];
		var order_serial = Request["order_serial"];
		console.log(phone)
		console.log(order_serial)
	
		// 获取详情
		getDetails();
		function getDetails() {
			$("#track_company").val("顺丰速递");
			$("#order_serial").val(order_serial);
			$.ajax({
				url : "../express/getSFTrackingSingleInfo_Phone.hn?order_serial=" + order_serial + "&lang=0" + "&last4number=" + phone.substring(phone.length - 4),
				type : 'get',
				dataType : "json",
				success : function(data) {
					if (data.success) {
						console.log(data.trackinfo);
						showOrderInfo(data.trackinfo);
					} else {
						alert(data.msg);
						window.close();
					}
				}
			});
		}
	
		var progressList = new Array();
		function showOrderInfo(orderInfo) {
			// 展示
			$("#content").removeAttr("style");
			$("#loading").css('display', 'none');
			$("#stepBar").empty();
	
			$("#flow_details_info").append("快递单号:<a href='#'>" + order_serial + "</a>");
	
			for (i = 0; i < orderInfo.length; i++) {
				var color = '#666666';
				var ncolor = '#DDDDDD';
				if (i == 0) {
					color = '#75CEC8';
					var ncolor = '#75CEC8';
				}
				
				var data = {'progress_title':orderInfo[i].StatusDescription,'progress_time': orderInfo[i].Date};
				progressList.push(data);
			}
			
			renderProgress(progressList);
		}
		
		function renderProgress(progressList) {
			var progressBox = document.querySelector('.progress_box');
			console.log(progressBox)
			console.log(progressList);
			var progressTemplate = ''
			for (var i = 0; i < progressList.length; i++) {
				if (i == progressList.length - 1) {
					progressTemplate += "<li class='last_progress'><div class='progress_content'><p class='progress_title'>" + progressList[i].progress_title + "</p><p class='progress_time'>" + progressList[i].progress_time + "</p> </div></li>"
				} else if (i == 0) {
					progressTemplate += "<li class='first_progress'><div class='progress_content'><p class='progress_title active'>" + progressList[i].progress_title + "</p><p class='progress_time'>" + progressList[i].progress_time + "</p> </div></li>"
				} else {
					progressTemplate += "<li><div class='progress_content'><p class='progress_title'>" + progressList[i].progress_title + "</p><p class='progress_time'>" + progressList[i].progress_time + "</p> </div></li>"
				}
			}
			progressBox.innerHTML = progressTemplate
		}
		
		//alert 弹窗不显示域名
		var wAlert = window.alert;
		window.alert = function (message) {
			try {
				var iframe = document.createElement("IFRAME");
				iframe.style.display = "none";
				iframe.setAttribute("src", 'data:text/plain,');
				document.documentElement.appendChild(iframe);
				var alertFrame = window.frames[0];
				var iwindow = alertFrame.window;
				if (iwindow == undefined) {
					iwindow = alertFrame.contentWindow;
				}
				iwindow.alert(message);
				iframe.parentNode.removeChild(iframe);
			}
			catch (exc) {
				return wAlert(message);
			}
		}
		var wConfirm = window.confirm;
		window.confirm = function (message) {
			try {
				var iframe = document.createElement("IFRAME");
				iframe.style.display = "none";
				iframe.setAttribute("src", 'data:text/plain,');
				document.documentElement.appendChild(iframe);
				var alertFrame = window.frames[0];
				var iwindow = alertFrame.window;
				if (iwindow == undefined) {
					iwindow = alertFrame.contentWindow;
				}
				iwindow.confirm(message);
				iframe.parentNode.removeChild(iframe);
			}
			catch (exc) {
				return wConfirm(message);
			}
		}
	</script>
</body>
</html>
